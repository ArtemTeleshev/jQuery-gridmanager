
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Modal Bootbox- Gridmanager with Custom Controls</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="../dist/css/jquery.gridmanager.css" rel="stylesheet">
    <link href="css/demo.css" rel="stylesheet">
     <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="js/jquery.js"></script>
    <script src="js/jquery-ui.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="../dist/js/jquery.gridmanager.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.2.0/bootbox.min.js"></script>

  </head>
<body>

<div class="container">
    <div id="mycanvas">
        <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-6 column">
                <p>Try the youTube Button above</p>
            </div>
            <div class="col-md-6 col-sm-6 col-xs-6 column">
                <p>Once you've inserted it, note how it's responsive due to the additional bootstrap classes</p>
            </div>
        </div>
    </div>
</div>

<!--================== JS ================-->
<script>

    var gm=$("#mycanvas").gridmanager({
        debug:1,
        customControls: {
            global_col: [{ callback: 'youtube_btn', loc: 'top', iconClass: 'fa fa-youtube-play' }]
        }
    }).data('gridmanager');


function youtube_btn(container, btnElem) {

  // Launch Dialog
  bootbox.dialog({
    message: $("<input />").addClass("youTubeInsert").addClass("form-control").val("https://www.youtube.com/watch?v=Kdgt1ZHkvnM"),
    title: "Enter youTube URL",
    buttons:{
      success: {
        label: "Insert YouTube Video",
        className: "btn-success",
          // Main Callback: takes the youTube URL and finds the ID, then returns the embed code
          callback: function(e){
          var html="",
              url = $(".youTubeInsert").val(),
              videoid = url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);

            if(videoid != null) {
              console.log("video id = ",videoid[1]);
            } else {
              console.log("The youtube url is not valid.");
            }

            html="<div class='embed-responsive embed-responsive-16by9'><iframe width='560' height='315' src='//www.youtube.com/embed/" + videoid[1] + "' frameborder='0' allowfullscreen></iframe></div>";

            // Add Back to Gridmanger, and wrap in editable region
            gm.addEditableAreaClick(container, btnElem, html);
          }
      }
    }
  });
}

</script>
</body>
</html>
